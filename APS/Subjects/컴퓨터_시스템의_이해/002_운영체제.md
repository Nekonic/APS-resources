#  운영체제

- 하드웨어 관리: CPU, 메모리, 입출력 장치 등 시스템 자원을 효율적으로 관리

- 프로세스 관리: 실행 중인 프로그램들의 생성, 종료, 스케줄링을 담당

- 메모리 관리: 주기억장치와 보조기억장치 간의 데이터 이동 및 할당 관리

- 파일 시스템 관리: 데이터의 저장, 검색, 보안을 위한 파일 구조 제공

- 입출력 장치 드라이버 관리: 다양한 하드웨어 장치와의 인터페이스 제공

- 사용자 인터페이스: 사용자가 시스템과 상호작용할 수 있는 환경 제공

- 보안과 접근 제어: 시스템 자원에 대한 접근 권한 관리

- 네트워킹: 네트워크 통신 및 프로토콜 관리

## 커널
커널은 운영체제의 심장으로, 하드웨어와 소프트웨어 사이의 핵심 인터페이스 역할을 수행

## 커널의 유형

- 모놀리식 커널: 리눅스와 유닉스에서 사용, 모든 서비스가 커널 공간에서 실행

- 마이크로 커널: QNX에서 사용, 최소한의 기능만 커널에 포함하고 나머지는 사용자 공간에서 실행

- 하이브리드 커널: 윈도우, iOS에서 사용, 모놀리식과 마이크로 커널의 특징을 결합


## 프로세스 상태 전환

- 프로세스: 실행 중인 프로그램의 인스턴스로, 특정 프로그램이 메모리에 적재되어 실행되고 있는 상태

### 과정
- 생성 -> 준비 -> 실행 -> 대기 -> 종료

### 프로세스 제어 블록 (PCB)

- 정의: 운영체제가 각 프로세스를 관리하기 위한 정보를 저장하는 데이터 구조
- 포함 정보: 프로세스 ID, 프로그램 카운터, 레지스터 값, 메모리 관리 정보, 입출력 상태 정보 등

### 문맥교환 (Context Switching)

- 정의: 운영체제가 한 프로세스에서 다른 프로세스로 CPU 할당을 전환하는 과정
- 과정: 현재 프로세스의 상태를 PCB에 저장 → 새로운 프로세스의 PCB에서 상태 복원

### 스레드와 프로세스 차이점
| | 프로세스 | 스레드 |
| - | - | - |
|자원 공유|별도의 자원을 독립적으로 할당|같은 프로세스 내 자원 공유|
|메모리 공간|독립적인 주소 공간|코드, 데이터, 힙 등을 공유|
|생성과 관리|생성 및 전환 비용이 높음|생성 및 전환 비용이 낮음|
|독립성|한 프로세스 오류가 다른 프로세스에 영향 없음|하나의 스레드 오류가 전체 프로세스에 |영향|
|성능|Context Switching 비용이 큼|Context Switching 비용이 작음|
|통신|별도 IPC 메커니즘 필요|메모리 공유를 통한 간단한 통신|

## 프로세스 동기화

임계지역 (Critical Section)
- 정의: 멀티태스킹 환경에서 공유 자원에 대한 접근을 관리하는 코드 영역
- 조건: 상호배제, 진행, 한정 대기를 만족해야 함

경쟁 조건 (Race Condition)
- 정의: 프로세스 또는 스레드가 데이터나 자원에 동시에 접근할 때 실행 순서나 타이밍에 따라 결과가 달라지는 상황

데커 알고리즘 (Dekker's Algorithm)
- 목적: 두 프로세스가 임계 영역에 동시 접근을 방지

- 구성 요소:
    - 플래그 변수: 각 프로세스가 임계영역 진입 의도를 표시
    - 턴 변수: 현재 어떤 프로세스가 임계 영역에 접근할 차례인지 표시

피터슨 알고리즘 (Peterson's Algorithm)

- 특징: 프로세스 간 상호배제를 보장하는 소프트웨어 기반 알고리즘

램포트 베이커리 알고리즘 (Lamport's Bakery Algorithm)

- 원리: 번호표 시스템과 유사한 방식으로 동작


### 동기화 기법
뮤텍스 (Mutex)
- 정의: 다중 스레드 프로그래밍에서 동기화를 위해 사용하는 락 메커니즘
- 특징: 한 번에 한 스레드만 임계지역에 접근 가능하도록 보장
세마포어 (Semaphore)
- 정의: 다중 프로세스가 공유자원에 접근할 때 상호배제와 동기화를 제공
- 연산:
    - wait() 연산 (P 연산): 세마포어 값이 0보다 크면 감소시키고 임계지역 진입
    - signal() 연산 (V 연산): 임계지역 작업 완료 후 세마포어 값 증가
- 종류:
    - 바이너리 세마포어: 하나의 공유자원 관리
    - 카운팅 세마포어: 제한된 수의 공유자원 관리

모니터 (Monitor)
- 정의: 멀티스레딩 환경에서 공유 자원에 대한 접근을 안전하게 관리하는 동기화 기법
- 구성 요소:
    - 대기 세트 (Wait Set): 특정 조건 충족까지 기다리는 스레드들의 집합
    - 엔트리 세트 (Entry Set): 임계 영역 접근 대기 중인 스레드들의 집합

## CPU 스케줄링
CPU 스케줄링의 정의
- 프로세스의 작업을 수행하기 위해 언제 어느 프로세스에 CPU를 할당할 것인지 결정하는 작업

CPU 스케줄링 원칙
- 공정함: 모든 프로세스가 공평하게 CPU를 사용할 기회 제공
- 우선순위: 중요한 프로세스에 우선적으로 CPU 할당

### 선점 스케줄링

우선순위가 높은 작업이 나타나면 현재 CPU를 사용 중인 프로세스가 강제로 CPU를 뺏기는 방식

- 라운드로빈 (Round Robin): 각 프로세스에 일정한 시간(타임 슬라이스)만큼 CPU 할당
- SRT (Shortest Remaining Time): 대기 중인 프로세스 중 남은 실행 시간이 가장 짧은 프로세스에 CPU 할당
- 다단계 큐 스케줄링 (MLQ): 프로세스들을 여러 큐로 분류하고 각 큐에 다른 스케줄링 적용
- 다단계 피드백 큐 스케줄링 (MLFQ): 프로세스의 우선순위를 동적으로 변경하여 기아 현상 방지

### 비선점 스케줄링

한 번 CPU를 할당받은 프로세스가 실행 완료까지 CPU를 계속 사용하는 방식

- FCFS (First Come First Served): 먼저 도착한 프로세스부터 처리
- SJF (Shortest Job First): 실행 시간이 가장 짧은 프로세스부터 처리
- HRN (Highest Response Ratio Next): 응답률이 가장 높은 프로세스 우선 처리

우선순위 역전과 해결방법
- 우선순위 역전: 우선순위가 높은 작업이 낮은 작업에 의해 실행되지 못하는 상태
- 해결방법:
    - 우선순위 상속: 낮은 우선순위 작업이 높은 우선순위를 상속받는 기법
    - 우선순위 상한: 우선순위가 낮은 작업의 우선순위를 가장 높게 설정하는 방법

## 교착상태 (Deadlock)

교착상태의 정의
- 둘 이상의 프로세스에서 서로 다른 프로세스가 보유한 자원을 요구하여 어떤 프로세스도 작업을 진행하지 못하고 영원히 기다리는 상태

교착상태 발생 조건 (필요충분조건)

- 상호배제 (Mutual Exclusion): 한 시점에 하나의 프로세스만 자원 사용 가능
- 점유와 대기 (Hold and Wait): 최소한 하나의 자원을 보유하면서 추가 자원을 기다리는 상태
- 비선점 (No Preemption): 프로세스가 자원을 얻으면 강제로 빼앗을 수 없음
- 환형대기 (Circular Wait): 프로세스들이 순환적으로 다음 프로세스의 자원을 요구


### 교착상태 해결방법
예방 (Prevention)
- 교착상태 발생 4가지 조건 중 하나 이상이 성립되지 않도록 시스템 설계

회피 (Avoidance)
- 목적: 교착상태가 발생할 수 있는 상황을 사전에 회피

은행가 알고리즘: 시스템이 안전상태에 있을 때만 자원을 할당하도록 결정

Wait-Die/Wound-Wait 방식
- Wait-Die: 요청 프로세스의 타임스탬프가 더 오래되었을 경우 대기, 그렇지 않으면 포기
- Wound-Wait: 요청 프로세스의 타임스탬프가 더 오래되었을 경우 현재 자원을 빼앗음

발견 (Detection)
- 시스템 내 프로세스와 자원 할당 상태를 체크하여 교착상태를 탐지

회복 (Recovery)
- 교착상태 발견 후 정상적인 상태로 돌아가기 위한 조치

## 주기억장치 관리
### 메모리 할당 기법

연속 할당
- 고정크기 파티셔닝: 메모리를 고정된 크기의 구획으로 분할
- 가변크기 파티셔닝: 프로세스 크기에 따라 동적으로 메모리 분할

불연속 할당
- 페이징 (Paging): 프로세스 주소공간을 동일한 크기의 페이지로 분할하고, 주기억장치를 같은 크기의 프레임으로 분할
- 세그먼테이션 (Segmentation): 프로세스 주소공간을 논리적 단위인 세그먼트로 분할

### 주소 변환 과정
페이징 주소 변환
- 페이지 테이블: 특정 프로세스의 페이지가 주기억장치의 어느 프레임에 있는지 알려주는 주소변환 정보
- TLB (Translation Lookaside Buffer): 논리주소와 물리주소 간 매핑정보를 캐시하는 고속 메모리

세그먼테이션 주소 변환
- 특징: 메모리를 논리적이고 의미 있는 단위로 분할
- 구성: Base 주소와 Limit 주소를 이용한 주소 변환

### 단편화 (Fragmentation)
주기억장치에서 프로그램에 사용되지 못하고 낭비되는 메모리 공간

단편화 유형
- 내부 단편화: 할당된 메모리 내부에 사용되지 않는 공간
- 외부 단편화: 할당되지 않은 메모리 조각들이 흩어져 있는 상태

단편화 해결방법
- 메모리 압축: 메모리 내 모든 프로세스를 이동시켜 연속된 빈 공간 생성
- 버디 시스템: 메모리를 연속적인 블록으로 나누고 요구 크기에 맞게 할당 및 병합

## 가상 메모리 (Virtual Memory)
가상 메모리의 정의
- 주기억장치와 보조기억장치를 함께 사용하여 메모리 용량을 확장하는 기법

페이지 부재 (Page Fault)
- 현재 실행 중인 프로세스에 필요한 페이지가 주기억장치에 없을 때 발생하는 상황

스와핑 (Swapping)
- 정의: 주기억장치와 보조기억장치 간에 데이터 또는 프로세스를 전송하는 메모리 관리 기술
- 스왑인 (Swap In): 보조기억장치에서 주기억장치로 데이터 이동
- 스왑아웃 (Swap Out): 주기억장치에서 보조기억장치로 데이터 이동

### 가상 메모리 관리 정책
반입정책
- 언제 어느 항목을 보조기억장치에서 주기억장치로 가져올 것인지 결정
- 요구 반입: 필요할 때만 메모리로 적재
- 예측 반입: 미리 예측하여 메모리로 적재

배치정책
- 프로그램의 한 블록을 주기억장치의 어디에 배치할 것인지 관리
- First Fit, Best Fit, Worst Fit 등의 방식 사용

교체정책
- 메모리가 부족할 때 어떤 페이지를 교체할 것인지 결정하는 정책

스레싱 (Thrashing)
- 정의: 시스템의 대부분 시간을 페이지 교체 작업에 소비하여 실제 유용한 작업을 거의 수행하지 못하는 상태
- 원인: 과도한 멀티태스킹 환경에서 발생
- 스레싱 해결방법
    - 워킹셋 (Working Set): 시간 지역성을 이용하여 자주 참조하는 페이지들을 주기억장치에 상주
    - PFF (Page Fault Frequency): 페이지 부재의 상한값과 하한값을 결정하여 프레임 개수 조정

## 파일 시스템

파일 시스템의 정의

- 컴퓨터에서 데이터를 저장하고 관리하는 중요한 시스템으로, 파일을 저장하고 찾는 방법을 정의하는 규칙이자 구조

각 운영체제마다 고유한 파일 시스템을 사용하여 데이터를 효율적으로 관리

### 파일 시스템 구조와 i-node
블록 그룹
- 파일 시스템을 여러 블록 그룹으로 나누어 관리하는 구조

i-node
- 정의: 유닉스나 리눅스 같은 운영체제에서 파일이나 디렉터리에 대한 메타데이터를 저장하는 데이터 구조
- 기능: 파일의 속성, 권한, 위치 정보 등을 관리
